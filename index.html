<!doctype html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width,initial-scale=1,user-scalable=no">
	<title>piSwitcher</title>
	<link href='http://fonts.googleapis.com/css?family=Source+Sans+Pro:400,700' rel='stylesheet' type='text/css'>
	<link rel="stylesheet" href="style.css">
</head>
<body>
	<div class="switch-wrapper">
		<label>1ms</label>
		<input id="1" type="radio" name="pulse-width" value="1">
	</div>
	<div class="switch-wrapper">
	<label>1.5ms</label>
		<input id="15" type="radio" name="pulse-width" value="1.5">
	</div>
	<div class="switch-wrapper">
		<label>2ms</label>
		<input id="2" type="radio" name="pulse-width" value="2">
	</div>
</body>
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>
<link href="/bower_components/toastr/toastr.min.css" rel="stylesheet"/>
<script src="/bower_components/toastr/toastr.min.js"></script>
<script src="/socket.io/socket.io.js"></script>
<script>
  var socket = io.connect('http://' + location.host);

  // Socket.io Listeners
  socket.on('connect', function (data) {
		console.log(data);
  });
  socket.on('success', function(data){
  	toastr.success(data.message);
  });
  socket.on('toast', function(data){
  	toastr.info(data.message);
  });
  socket.on('confirmPulse', function(data){
  	var elem = '#' + data.width;
  	elem = elem.replace('.','');
  	$(elem).prop('checked', 1);
  });

  // Socket.io Emitters
  $('input').on('click', function(el){
		el.preventDefault();
		socket.emit('pulse', {
			width: this.value
		});
  });

  // Socket.io Events
  socket.on('connecting', function (){
  	toastr.info('Attempting to connect to server');
  });
  socket.on('disconnect', function (){
  	toastr.error('Disconnected from server');
  });
  socket.on('connect_failed', function (){
  	toastr.error('Failed to establish connection');
  });
  socket.on('reconnect_failed', function (){
  	toastr.error('Failed to re-establish connection');
  });
</script>
</html>
